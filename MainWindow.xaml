<Window x:Class="ContribCalendar.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ContribCalendar"
        xmlns:controls="clr-namespace:ContribCalendar.Controls"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        mc:Ignorable="d"
        Title="贡献日历"
        Background="Transparent"
        AllowsTransparency="True"
        WindowStyle="None"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterScreen"
        Height="125" Width="720"
        ShowInTaskbar="False">

    <Window.ContextMenu>
        <ContextMenu Name="AppContextMenu" Closed="ContextMenu_Closed">
            <MenuItem Header="刷新数据" Name="RefreshMenuItem" Click="Refresh_Click"/>
            <MenuItem Header="设置..." Name="SettingsMenuItem" Click="Settings_Click"/>
            <MenuItem Header="关于 (@Jysir99 GitHub)" Click="About_Click"/>
            <Separator/>
            <MenuItem Header="退出" Name="ExitMenuItem" Click="Exit_Click"/>
        </ContextMenu>
    </Window.ContextMenu>

    <Grid>
        <!-- 系统托盘图标 -->
        <tb:TaskbarIcon x:Name="TrayIcon"
                        ToolTipText="贡献日历"
                        IconSource="/Resources/tray.ico"
                        TrayMouseDoubleClick="TrayIcon_DoubleClick">
            <tb:TaskbarIcon.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="显示/隐藏" Click="TrayShow_Click"/>
                    <MenuItem Header="刷新数据" Click="Refresh_Click"/>
                    <MenuItem Header="设置..." Click="Settings_Click"/>
                    <MenuItem Header="关于 (@Jysir99 GitHub)" Click="About_Click"/>
                    <Separator/>
                    <MenuItem Header="退出" Click="Exit_Click"/>
                </ContextMenu>
            </tb:TaskbarIcon.ContextMenu>
        </tb:TaskbarIcon>

        <!-- 缩放容器 -->
        <Viewbox Name="ScaleViewbox" Stretch="Uniform">
            <!-- 外层带外边距的 Grid 留出阴影空间 -->
            <Grid Width="740" Height="135">
                <Border Margin="10"
                        Background="#F5F5F5"
                        CornerRadius="12"
                        BorderBrush="#E0E0E0"
                        BorderThickness="1">
                    <Border.Effect>
                        <DropShadowEffect Color="#000000" Opacity="0.15" BlurRadius="20" ShadowDepth="2" Direction="270"/>
                    </Border.Effect>
                    
                    <Grid>
                        <!-- 内容层：带内边距 -->
                        <Border Padding="8,4,8,0">
                            <!-- 内容区域 -->
                            <Grid Name="ContentGrid"/>
                        </Border>

                        <!-- 加载层：覆盖在内容层之上，不受内边距控制 -->
                        <Border Name="LoadingOverlay" Visibility="Collapsed" Background="#40000000" CornerRadius="12">
                            <controls:LoadingOverlay HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </Grid>
                </Border>
            </Grid>
        </Viewbox>
    </Grid>
</Window>
