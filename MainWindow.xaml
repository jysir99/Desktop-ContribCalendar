<Window x:Class="ContribCalendar.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ContribCalendar"
        xmlns:controls="clr-namespace:ContribCalendar.Controls"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        mc:Ignorable="d"
        Title="贡献日历"
        Background="Transparent"
        AllowsTransparency="True"
        WindowStyle="None"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterScreen"
        Height="125" Width="720"
        ShowInTaskbar="False">

    <Window.ContextMenu>
        <ContextMenu Name="AppContextMenu" Closed="ContextMenu_Closed">
            <MenuItem Header="刷新数据" Name="RefreshMenuItem" Click="Refresh_Click"/>
            <MenuItem Header="设置..." Name="SettingsMenuItem" Click="Settings_Click"/>
            <Separator/>
            <MenuItem Header="退出" Name="ExitMenuItem" Click="Exit_Click"/>
        </ContextMenu>
    </Window.ContextMenu>

    <Grid>
        <!-- 系统托盘图标 -->
        <tb:TaskbarIcon x:Name="TrayIcon"
                        ToolTipText="贡献日历"
                        IconSource="/Resources/tray.ico"
                        TrayMouseDoubleClick="TrayIcon_DoubleClick">
            <tb:TaskbarIcon.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="显示/隐藏" Click="TrayShow_Click"/>
                    <MenuItem Header="刷新数据" Click="Refresh_Click"/>
                    <MenuItem Header="设置..." Click="Settings_Click"/>
                    <Separator/>
                    <MenuItem Header="退出" Click="Exit_Click"/>
                </ContextMenu>
            </tb:TaskbarIcon.ContextMenu>
        </tb:TaskbarIcon>

        <!-- 缩放容器 -->
        <Viewbox Name="ScaleViewbox" Stretch="Uniform">
            <Grid Width="730" Height="110">
                <!-- 主边框，毛玻璃效果 -->
                <Border>
                    <Border.Effect>
                        <DropShadowEffect Color="#000000" Opacity="0.3" BlurRadius="30" ShadowDepth="0"/>
                    </Border.Effect>

                    <Grid>
                        <!-- 毛玻璃背景层 -->
                        <Border CornerRadius="12">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#C0E8F0F8" Offset="0"/>
                                    <GradientStop Color="#B0D8E8F0" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Border.Clip>
                                <RectangleGeometry RadiusX="12" RadiusY="12" Rect="0,0,720,125"/>
                            </Border.Clip>
                        </Border>

                        <!-- 内容层 -->
                        <Border CornerRadius="12" BorderBrush="#40FFFFFF" BorderThickness="1" Padding="8,4,8,0">
                            <Border.Clip>
                                <RectangleGeometry RadiusX="12" RadiusY="12" Rect="0,0,720,125"/>
                            </Border.Clip>
                            <Grid>
                                <!-- 内容区域 -->
                                <Grid Name="ContentGrid"/>

                                <Grid Name="LoadingOverlay" Visibility="Collapsed" Background="#40000000">
                                    <controls:LoadingOverlay HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Grid>
                            </Grid>
                        </Border>
                    </Grid>
                </Border>
            </Grid>
        </Viewbox>
    </Grid>
</Window>
